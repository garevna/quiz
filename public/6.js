(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[6],{

/***/ "./components/loginComponent.js":
/*!**************************************!*\
  !*** ./components/loginComponent.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var MODULES_js_sha256__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! MODULES/js-sha256 */ \"./node_modules/js-sha256/src/sha256.js\");\n/* harmony import */ var MODULES_js_sha256__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(MODULES_js_sha256__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\nconst LoginComponent = ('login-component', {\n  data() {\n    return {\n      cardClass: \"mb-8 py-5 px-12 dark-card\",\n      cardHeight: 150,\n      stepperColor: \"#590\",\n      logins: null,\n      login: \"\",\n      password: \"\",\n      showPassText: false,\n      color: \"#09b\",\n      user: {},\n      registered: false,\n      stage: 0,\n      backIcon: 'chevron_left',\n      backIconColor: \"#09b\",\n      theFile: null,\n      avatar: \"https://www.themelister.com/templates/nabster/dleimages/noavatar.png\"\n    };\n  },\n\n  computed: {\n    validLogin: function () {\n      return this.login && this.logins.filter(login => login.indexOf(this.login) !== -1).length !== 0;\n    },\n    loginHint: function () {\n      return !this.login ? \"Enter login\" : this.validLogin ? \"Valid\" : `User ${this.login} doesn't exist`;\n    },\n    loginColor: function () {\n      return this.validLogin ? \"#09b\" : \"#f50\";\n    },\n    validPassword: function () {\n      return Object(MODULES_js_sha256__WEBPACK_IMPORTED_MODULE_0__[\"sha256\"])(this.password) === this.user.passHash;\n    },\n    passwordLabel: function () {\n      return `Password for ${this.login}`;\n    },\n    passColor: function () {\n      return !this.validPassword ? \"#f00\" : \"#09b\";\n    },\n    passHint: function () {\n      return !this.validPassword ? \"Incorrect password\" : \"correct password\";\n    }\n  },\n  methods: {\n    async getUserInfo() {\n      if (this.validLogin) {\n        this.user = await this.$root.$store.dispatch(\"getUserInfo\", this.login);\n        this.stage = 2;\n      }\n    },\n\n    async getLogins() {\n      this.logins = Object.keys((await (await fetch(\"https://garevna-js-quiz.glitch.me/forms/all\")).json()));\n    },\n\n    enter() {\n      this.validPassword ? this.setUserData() : null;\n      this.$root.$emit(\"sign-in-finished\");\n      console.log(this.$root.$store.state.userInfo);\n    },\n\n    exit() {\n      this.$root.$emit(\"sign-in-finished\");\n    },\n\n    setUserData() {\n      document.cookie = `user=${this.login}`;\n      document.cookie = `pass=${this.user.passHash}`;\n      console.log(this.user);\n      this.$root.$store.commit('setUser', {\n        login: this.login,\n        name: this.user.name,\n        fname: this.user.fname,\n        registered: this.user.registered,\n        photoURL: this.user.photoURL,\n        passHash: this.user.passHash\n      });\n      this.$root.$store.commit(\"setUserResults\", this.user.results);\n    }\n\n  },\n\n  created() {\n    this.getLogins().then(() => this.stage = 1);\n  },\n\n  template: `\n  <v-container fluid fill-height>\n   <v-stepper v-model=\"stage\" dark\n              class=\"dark-card mx-auto\"\n              v-if=\"user\">\n    <v-stepper-header dark>\n          <v-stepper-step :complete=\"validLogin\"\n                          step=\"1\"\n                          :color=\"stepperColor\">\n          </v-stepper-step>\n\n      <v-divider></v-divider>\n\n          <v-stepper-step :complete=\"stage > 2\"\n                          step=\"2\"\n                          :color=\"stepperColor\">\n          </v-stepper-step>\n\n    </v-stepper-header>\n\n    <v-stepper-items class=\"transparent\" dark>\n      <v-stepper-content step=\"1\">\n        <v-card :class=\"cardClass\"\n                :height=\"cardHeight\">\n          <v-text-field v-model=\"login\"\n                        :hint=\"loginHint\"\n                        label=\"User login\"\n                        :color=\"loginColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t@change.once=\"getUserInfo\">\n          </v-text-field>\n        </v-card>\n\n        <v-btn class=\"transparent\"\n               v-if=\"validLogin\"\n               @click=\"getUserInfo\">\n          Continue\n        </v-btn>\n\n        <v-btn transparent text @click=\"exit\">Cancel</v-btn>\n      </v-stepper-content>\n\n      <v-stepper-content step=\"2\">\n        <v-card :class=\"cardClass\"\n                :height=\"cardHeight\">\n          <v-text-field v-model=\"password\"\n                        autofocus\n                        :hint=\"passHint\"\n                        :label=\"passwordLabel\"\n                        :append-icon=\"showPassText ? 'mdi-eye' : 'mdi-eye-off'\"\n                        :type=\"showPassText ? 'text' : 'password'\"\n                        @click:append=\"showPassText = !showPassText\"\n                        :color=\"passColor\">\n          </v-text-field>\n        </v-card>\n\n        <v-btn class=\"transparent\"\n               v-if=\"passHint === 'correct password'\"\n               @click=\"enter\">\n          Submit\n        </v-btn>\n\n        <v-btn transparent text @click=\"exit\">Cancel</v-btn>\n      </v-stepper-content>\n\n    </v-stepper-items>\n  </v-stepper>\n</v-container>\n  `\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (LoginComponent);\n\n//# sourceURL=webpack:///./components/loginComponent.js?");

/***/ })

}]);